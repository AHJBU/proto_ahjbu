import{c as _,j as e,r as j,X as Q,t as v,d as ee,b as se}from"./index-CEFGCZnp.js";import{A as ae}from"./AdminLayout-BFo7kI8c.js";import{C as S,c as w,d as y,e as te,a as k,b as ie}from"./card-DsqFjwao.js";import{I as P}from"./input-DqKHY6Ez.js";import{T as F}from"./textarea-B8Ku1Xn0.js";import{L as u}from"./label-C9OSIm7g.js";import{S as le,a as ne,b as re,c as oe,d as ce}from"./select-DAOFtx9-.js";import{S as R}from"./switch-D9dv8vKo.js";import{B as T}from"./badge-BQVUS7r0.js";import{B as m}from"./button-C58ynU3B.js";import{P as de}from"./plus-CZOBiviS.js";import{T as me,a as he,b as V,c as L}from"./tabs-BoUARueK.js";import{E as M}from"./EnhancedFileUpload-Dy7TZYHL.js";import{I as ue}from"./image-BSShWM4Y.js";import{D as xe,b as pe,c as je,d as ge}from"./dialog-CF5yEXG4.js";import{S as fe}from"./share-2-w0cFL3Qs.js";import{P as ve,b as be,f as U,c as Ne,C as Ce}from"./popover-D7ISH4yZ.js";import{C as O}from"./calendar-8sjuA-jc.js";import{C as Se}from"./clock-DB87Vs4Z.js";import{A as we}from"./arrow-left-DIUS8eUs.js";import{E as ye}from"./eye-BQ_UEY2C.js";import"./index-CULbYOlY.js";import"./search-B6zhR9QM.js";import"./users-DLZwGyT7.js";import"./user-DmvOLSi9.js";import"./index-BdQq_4o_.js";import"./index-DdPWxvf5.js";import"./index-Cxzs49dU.js";import"./check-DnlIeJCj.js";import"./index-CclG9uEl.js";import"./upload-Dobc1O8K.js";import"./chevron-right-BkmDrAPN.js";import"./chevron-left-DGQHl69K.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=_("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),ke=({title:t,content:l,excerpt:o,onTitleChange:a,onContentChange:d,onExcerptChange:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Post Title"}),e.jsx(P,{id:"title",name:"title",value:t,onChange:a,placeholder:"Enter post title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"content",children:"Content"}),e.jsx(F,{id:"content",name:"content",value:l,onChange:d,placeholder:"Write your post content here...",className:"min-h-[300px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"excerpt",children:"Excerpt"}),e.jsx(F,{id:"excerpt",name:"excerpt",value:o,onChange:n,placeholder:"Write a brief excerpt for your post...",className:"min-h-[100px]"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A short summary of your post. If left empty, an excerpt will be generated automatically."})]})]}),Te=({tags:t,onAddTag:l,onRemoveTag:o})=>{const[a,d]=j.useState(""),n=()=>{if(a.trim()!==""){if(t.includes(a.trim())){v({title:"Tag already exists",description:"This tag has already been added.",variant:"destructive"});return}l(a.trim()),d("")}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{value:a,onChange:c=>d(c.target.value),placeholder:"Add tag...",onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),n())}}),e.jsx(m,{type:"button",size:"sm",onClick:n,children:e.jsx(de,{className:"h-4 w-4"})})]}),t.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map(c=>e.jsxs(T,{variant:"secondary",className:"px-2 py-1",children:[c,e.jsx("button",{className:"ml-1",onClick:()=>o(c),children:e.jsx(Q,{className:"h-3 w-3"})})]},c))})]})},Pe=({category:t,categories:l,tags:o,views:a,allowComments:d,onCategoryChange:n,onViewsChange:c,onAllowCommentsChange:g,onAddTag:b,onRemoveTag:N})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"category",children:"Category"}),e.jsxs(le,{value:t,onValueChange:n,children:[e.jsx(ne,{id:"category",children:e.jsx(re,{placeholder:"Select category"})}),e.jsx(oe,{children:l.map(f=>e.jsx(ce,{value:f.name,children:f.name},f.id))})]})]}),e.jsx(Te,{tags:o,onAddTag:b,onRemoveTag:N}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Initial View Count"}),e.jsx(P,{type:"number",name:"views",value:a,onChange:c,min:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set an initial view count for this post"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{htmlFor:"allowComments",className:"cursor-pointer",children:"Enable Comments"}),e.jsx(R,{id:"allowComments",checked:d,onCheckedChange:g})]})]}),De=({featuredImage:t,videoBackground:l,isVideoBackground:o,onImageUpload:a,onVideoUpload:d,onRemoveMedia:n})=>e.jsxs(me,{defaultValue:"image",children:[e.jsxs(he,{className:"w-full mb-4",children:[e.jsxs(V,{value:"image",className:"flex-1",children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Image"]}),e.jsxs(V,{value:"video",className:"flex-1",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Video"]})]}),e.jsx(L,{value:"image",children:t?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:t,alt:"Featured",className:"rounded-md border w-full object-cover h-40"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:n,children:"Remove"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>a(t),children:"Change"})]})]}):e.jsx(M,{endpoint:"/api/uploads/blog",onSuccess:a,accept:"image/*",maxSize:5,label:"Upload Featured Image",category:"blog"})}),e.jsxs(L,{value:"video",children:[l?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"border rounded-md p-4 text-center",children:[e.jsx(z,{className:"h-10 w-10 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-sm font-medium",children:"Video Background Selected"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:n,children:"Remove"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>d(l),children:"Change"})]})]}):e.jsx(M,{endpoint:"/api/uploads/blog-video",onSuccess:d,accept:"video/*,.gif",maxSize:20,label:"Upload Video or GIF",category:"blog"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Upload a video or GIF to use as the background for this post. Supported formats: MP4, WebM, GIF."})]})]}),Ie=({author:t,authors:l,showAuthorSelect:o,setShowAuthorSelect:a,onSelectAuthor:d})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.avatar,alt:t.name,className:"h-8 w-8 rounded-full mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]})]}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>a(!0),children:"Change"})]}),e.jsx(xe,{open:o,onOpenChange:a,children:e.jsxs(pe,{children:[e.jsx(je,{children:e.jsx(ge,{children:"Select Author"})}),e.jsx("div",{className:"space-y-4",children:l.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-md cursor-pointer hover:bg-secondary/20",onClick:()=>d(n),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:n.avatar,alt:n.name,className:"h-10 w-10 rounded-full mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n.email})]})]}),n.socialLinks.length>0&&e.jsx("div",{className:"flex gap-2",children:n.socialLinks.map((c,g)=>e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx("a",{href:c.url,target:"_blank",rel:"noreferrer",children:e.jsx(fe,{className:"h-4 w-4"})})},g))})]},n.id))})]})})]}),Ee=({socialShareEnabled:t,socialPlatforms:l,onSocialShareChange:o,onPlatformToggle:a})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(u,{children:"Social Media Sharing"}),e.jsx(R,{checked:t,onCheckedChange:o})]}),t&&e.jsxs("div",{className:"pl-6 border-l space-y-2 mt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select platforms to share this post:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(T,{variant:l.facebook?"default":"outline",className:"cursor-pointer",onClick:()=>a("facebook"),children:"Facebook"}),e.jsx(T,{variant:l.twitter?"default":"outline",className:"cursor-pointer",onClick:()=>a("twitter"),children:"Twitter"}),e.jsx(T,{variant:l.linkedin?"default":"outline",className:"cursor-pointer",onClick:()=>a("linkedin"),children:"LinkedIn"}),e.jsx(T,{variant:l.pinterest?"default":"outline",className:"cursor-pointer",onClick:()=>a("pinterest"),children:"Pinterest"})]})]})]}),Ae=({seoTitle:t,seoDescription:l,onTitleChange:o,onDescriptionChange:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"seoTitle",children:"SEO Title"}),e.jsx(P,{id:"seoTitle",name:"seoTitle",value:t,onChange:o,placeholder:"SEO optimized title (if different from post title)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"seoDescription",children:"Meta Description"}),e.jsx(F,{id:"seoDescription",name:"seoDescription",value:l,onChange:a,placeholder:"Meta description for search engines",className:"min-h-[80px]"})]})]}),Fe=({showSchedule:t,publishDate:l,publishTime:o,onDateSelect:a,onTimeChange:d,onClose:n,onSchedule:c})=>t?e.jsxs(S,{className:"mb-6",children:[e.jsxs(w,{className:"pb-3",children:[e.jsx(y,{className:"text-base",children:"Schedule Publication"}),e.jsx(te,{children:"Set when this post should be published"})]}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Date"}),e.jsxs(ve,{children:[e.jsx(be,{asChild:!0,children:e.jsxs(m,{variant:"outline",className:"w-full justify-start text-left",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),l?U(l,"PPP"):"Select date"]})}),e.jsx(Ne,{className:"w-auto p-0",children:e.jsx(Ce,{mode:"single",selected:l||void 0,onSelect:a,initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Time"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx(P,{type:"time",name:"publishTime",value:o,onChange:d,className:"w-full"})]})]})]})}),e.jsxs(ie,{className:"flex justify-between",children:[e.jsx(m,{variant:"outline",onClick:n,children:"Cancel"}),e.jsx(m,{onClick:c,disabled:!l,children:"Schedule Post"})]})]}):null,Be=({id:t,title:l,lastSavedAt:o,isLoading:a,showSchedule:d,publishDate:n,publishTime:c,children:g,onBack:b,onPreview:N,onSaveDraft:f,onToggleSchedule:C,onPublish:r,onDateSelect:h,onTimeChange:D,onSchedule:p})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs(m,{variant:"outline",onClick:b,children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Back to Posts"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last saved: ",o.toLocaleTimeString()]}),e.jsxs(m,{variant:"outline",onClick:N,children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Preview"]}),e.jsx(m,{variant:"outline",onClick:f,children:"Save Draft"}),e.jsxs(m,{variant:"outline",onClick:C,children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Schedule"]}),e.jsx(m,{onClick:r,disabled:a,children:a?"Publishing...":"Publish"})]})]}),e.jsx(Fe,{showSchedule:d,publishDate:n,publishTime:c,onDateSelect:h,onTimeChange:D,onClose:C,onSchedule:p}),g]}),Ve=[{id:1,name:"Web Development"},{id:2,name:"App Development"},{id:3,name:"Design"},{id:4,name:"Social Media"},{id:5,name:"SEO"},{id:6,name:"Digital Marketing"}],A=[{id:1,name:"Ahmed Jamal",email:"ahmed@example.com",avatar:"/assets/avatar.jpg",socialLinks:[{platform:"twitter",url:"https://twitter.com/ahmedjamal"},{platform:"linkedin",url:"https://linkedin.com/in/ahmedjamal"}]},{id:2,name:"Mohammed Hassan",email:"mohammed@example.com",avatar:"/assets/avatar2.jpg",socialLinks:[]},{id:3,name:"Sara Ahmed",email:"sara@example.com",avatar:"/assets/avatar3.jpg",socialLinks:[]}],ps=()=>{const{id:t}=ee(),l=se(),[o,a]=j.useState(!1),[d,n]=j.useState(!1),[c,g]=j.useState(null),[b,N]=j.useState(null),[f,C]=j.useState(!1),[r,h]=j.useState({id:"",title:"",content:"",excerpt:"",category:"",tags:[],status:"draft",author:A[0],featuredImage:"",videoBackground:"",isVideoBackground:!1,publishDate:null,publishTime:"12:00",views:0,allowComments:!0,seoTitle:"",seoDescription:"",socialShareEnabled:!0,socialPlatforms:{facebook:!0,twitter:!0,linkedin:!1,pinterest:!1}});j.useEffect(()=>{t&&(a(!0),setTimeout(()=>{const s={id:t,title:"Sample Post Title",content:"This is a sample post content. In a real application, this would be loaded from a database.",excerpt:"Sample excerpt for the post.",category:"Web Development",tags:["React","JavaScript","Tutorial"],status:"draft",author:A[0],featuredImage:"/assets/blog1.jpg",videoBackground:"",isVideoBackground:!1,publishDate:new Date,publishTime:"14:30",views:150,allowComments:!0,seoTitle:"Sample Post Title | Blog",seoDescription:"Sample meta description for the post.",socialShareEnabled:!0,socialPlatforms:{facebook:!0,twitter:!0,linkedin:!0,pinterest:!1}};h(s),a(!1)},500))},[t]),j.useEffect(()=>{const s=setInterval(()=>{D()},3e4);return g(s),()=>{c&&clearInterval(c)}},[r]);const D=()=>{r.title.trim()!==""&&(console.log("Auto-saving post:",r),N(new Date),v({title:"Auto-saved",description:`Draft saved at ${new Date().toLocaleTimeString()}`,duration:3e3}))},p=s=>{const{name:i,value:x}=s.target;h(E=>({...E,[i]:x,seoTitle:i==="title"&&E.seoTitle===""?x:E.seoTitle}))},B=(s,i)=>{h(x=>({...x,[s]:i}))},W=s=>{h(i=>({...i,socialPlatforms:{...i.socialPlatforms,[s]:!i.socialPlatforms[s]}}))},H=s=>{s&&h(i=>({...i,publishDate:s}))},$=s=>{h(i=>({...i,tags:[...i.tags,s]}))},G=s=>{h(i=>({...i,tags:i.tags.filter(x=>x!==s)}))},Y=s=>{h(i=>({...i,featuredImage:s,isVideoBackground:!1}))},q=s=>{h(i=>({...i,videoBackground:s,isVideoBackground:!0}))},J=()=>{h(s=>({...s,featuredImage:"",videoBackground:"",isVideoBackground:!1}))},Z=s=>{h(i=>({...i,author:s})),C(!1)},I=async s=>{const i={...r,status:s};if(s==="scheduled"&&!i.publishDate){v({title:"Schedule Error",description:"Please select a publish date to schedule this post.",variant:"destructive"});return}a(!0);try{console.log("Saving post:",i),await new Promise(x=>setTimeout(x,1e3)),v({title:s==="published"?"Post Published":s==="scheduled"?"Post Scheduled":"Draft Saved",description:s==="published"?"Your post has been published successfully.":s==="scheduled"?`Your post has been scheduled for ${U(i.publishDate,"PPP")} at ${i.publishTime}.`:"Your draft has been saved successfully."}),l("/admin/blog")}catch(x){console.error("Error saving post:",x),v({title:"Error",description:"There was an error saving your post. Please try again.",variant:"destructive"})}finally{a(!1)}},K=()=>{v({title:"Preview Mode",description:"Post preview functionality would open in a new tab."})},X=s=>{h(i=>({...i,category:s}))};return e.jsx(ae,{title:t?"Edit Blog Post":"Create Blog Post",children:e.jsx(Be,{id:t,title:r.title,lastSavedAt:b,isLoading:o,showSchedule:d,publishDate:r.publishDate,publishTime:r.publishTime,onBack:()=>l("/admin/blog"),onPreview:K,onSaveDraft:()=>I("draft"),onToggleSchedule:()=>n(!d),onPublish:()=>I("published"),onDateSelect:H,onTimeChange:p,onSchedule:()=>I("scheduled"),children:e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-3 lg:col-span-2",children:[e.jsxs(S,{className:"mb-6",children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{children:"Post Content"})}),e.jsx(k,{children:e.jsx(ke,{title:r.title,content:r.content,excerpt:r.excerpt,onTitleChange:p,onContentChange:p,onExcerptChange:p})})]}),e.jsxs(S,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{children:"SEO & Social Sharing"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsx(Ae,{seoTitle:r.seoTitle,seoDescription:r.seoDescription,onTitleChange:p,onDescriptionChange:p}),e.jsx(Ee,{socialShareEnabled:r.socialShareEnabled,socialPlatforms:r.socialPlatforms,onSocialShareChange:s=>B("socialShareEnabled",s),onPlatformToggle:W})]})]})]}),e.jsxs("div",{className:"col-span-3 lg:col-span-1 space-y-6",children:[e.jsxs(S,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-base",children:"Post Details"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsx(Pe,{category:r.category,categories:Ve,tags:r.tags,views:r.views,allowComments:r.allowComments,onCategoryChange:X,onViewsChange:p,onAllowCommentsChange:s=>B("allowComments",s),onAddTag:$,onRemoveTag:G}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{children:"Author"}),e.jsx(Ie,{author:r.author,authors:A,showAuthorSelect:f,setShowAuthorSelect:C,onSelectAuthor:Z})]})]})]}),e.jsxs(S,{children:[e.jsx(w,{className:"pb-3",children:e.jsx(y,{className:"text-base",children:"Featured Media"})}),e.jsx(k,{children:e.jsx(De,{featuredImage:r.featuredImage,videoBackground:r.videoBackground,isVideoBackground:r.isVideoBackground,onImageUpload:Y,onVideoUpload:q,onRemoveMedia:J})})]})]})]})})})};export{ps as default};
