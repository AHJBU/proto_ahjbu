import{c as de,r as u,j as e,p as Z,z as ue,J as me}from"./index-CEFGCZnp.js";import{A as pe}from"./AdminLayout-BFo7kI8c.js";import{C as P,c as R,d as F,e as I,a as M,b as q}from"./card-DsqFjwao.js";import{B as k}from"./button-C58ynU3B.js";import{I as xe}from"./input-DqKHY6Ez.js";import{T as he,a as je,b as U,c as A}from"./tabs-BoUARueK.js";import{T as Y,a as G,b as $,c as f,d as J,e as g}from"./table-Ctc4k8fS.js";import{S as X}from"./scroll-area-DpfMkBU7.js";import{S as D}from"./switch-D9dv8vKo.js";import fe from"./ProtectedRoute-Bvm64H4k.js";import{L as z}from"./loader-circle-B1Pz0Ua7.js";import{D as ge}from"./download-DIkOb7Bk.js";import{R as W}from"./refresh-cw-CvYjcQH8.js";import{F as ve}from"./file-down-CeZpPj9g.js";import{U as be}from"./upload-Dobc1O8K.js";import"./dialog-CF5yEXG4.js";import"./index-CULbYOlY.js";import"./search-B6zhR9QM.js";import"./users-DLZwGyT7.js";import"./calendar-8sjuA-jc.js";import"./image-BSShWM4Y.js";import"./user-DmvOLSi9.js";import"./index-CclG9uEl.js";import"./index-DdPWxvf5.js";import"./index-BdQq_4o_.js";import"./index-Cxzs49dU.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=de("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function Ne(t,a=[]){let o=[];function n(p,l){const i=u.createContext(l),c=o.length;o=[...o,l];function h(m){const{scope:x,children:j,...b}=m,T=(x==null?void 0:x[t][c])||i,w=u.useMemo(()=>b,Object.values(b));return e.jsx(T.Provider,{value:w,children:j})}function v(m,x){const j=(x==null?void 0:x[t][c])||i,b=u.useContext(j);if(b)return b;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${p}\``)}return h.displayName=p+"Provider",[h,v]}const r=()=>{const p=o.map(l=>u.createContext(l));return function(i){const c=(i==null?void 0:i[t])||p;return u.useMemo(()=>({[`__scope${t}`]:{...i,[t]:c}}),[i,c])}};return r.scopeName=t,[n,ye(r,...a)]}function ye(...t){const a=t[0];if(t.length===1)return a;const o=()=>{const n=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(p){const l=n.reduce((i,{useScope:c,scopeName:h})=>{const m=c(p)[`__scope${h}`];return{...i,...m}},{});return u.useMemo(()=>({[`__scope${a.scopeName}`]:l}),[l])}};return o.scopeName=a.scopeName,o}var L="Progress",O=100,[Ce,rs]=Ne(L),[we,Se]=Ce(L),ee=u.forwardRef((t,a)=>{const{__scopeProgress:o,value:n=null,max:r,getValueLabel:p=Be,...l}=t;(r||r===0)&&!K(r)&&console.error(Te(`${r}`,"Progress"));const i=K(r)?r:O;n!==null&&!Q(n,i)&&console.error(Pe(`${n}`,"Progress"));const c=Q(n,i)?n:null,h=_(c)?p(c,i):void 0;return e.jsx(we,{scope:o,value:c,max:i,children:e.jsx(Z.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":_(c)?c:void 0,"aria-valuetext":h,role:"progressbar","data-state":ae(c,i),"data-value":c??void 0,"data-max":i,...l,ref:a})})});ee.displayName=L;var se="ProgressIndicator",te=u.forwardRef((t,a)=>{const{__scopeProgress:o,...n}=t,r=Se(se,o);return e.jsx(Z.div,{"data-state":ae(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:a})});te.displayName=se;function Be(t,a){return`${Math.round(t/a*100)}%`}function ae(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function _(t){return typeof t=="number"}function K(t){return _(t)&&!isNaN(t)&&t>0}function Q(t,a){return _(t)&&!isNaN(t)&&t<=a&&t>=0}function Te(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${O}\`.`}function Pe(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${O} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var re=ee,Re=te;const E=u.forwardRef(({className:t,value:a,...o},n)=>e.jsx(re,{ref:n,className:ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...o,children:e.jsx(Re,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));E.displayName=re.displayName;const Fe=[{id:"1",date:"2025-05-06T15:32:24",size:"24.5 MB",type:"Full",status:"Completed"},{id:"2",date:"2025-05-01T10:15:42",size:"23.8 MB",type:"Full",status:"Completed"},{id:"3",date:"2025-04-24T08:45:11",size:"22.9 MB",type:"Full",status:"Completed"},{id:"4",date:"2025-04-17T14:22:35",size:"22.1 MB",type:"Full",status:"Completed"},{id:"5",date:"2025-04-10T09:05:18",size:"21.6 MB",type:"Full",status:"Completed"}],ns=()=>{const{toast:t}=me(),[a,o]=u.useState(!1),[n,r]=u.useState(!1),[p,l]=u.useState(null),[i,c]=u.useState(0),[h,v]=u.useState(0),[m,x]=u.useState(Fe),[j,b]=u.useState({autoBackup:!0,backupFrequency:7,includeMedia:!0,includeConfigs:!0,includeStatistics:!0}),T=s=>{const d=new Date(s);return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(d)},w=(s,d,y=2500)=>{s(0);const C=30,N=100/(y/C);let B=0;const oe=setInterval(()=>{B+=N;const le=Math.min(B+(Math.random()*2-1),99.5);s(le),B>=100&&(clearInterval(oe),s(100),setTimeout(()=>{d()},200))},C)},ne=async()=>{if(!a){o(!0);try{w(c,()=>{const d={id:(parseInt(m[0].id)+1).toString(),date:new Date().toISOString(),size:`${(Math.random()*5+24).toFixed(1)} MB`,type:"Full",status:"Completed"};x([d,...m]),t({title:"Backup Created",description:"Your backup has been successfully created"}),o(!1),c(0)},2500)}catch{t({variant:"destructive",title:"Backup Failed",description:"There was an error creating your backup"}),o(!1),c(0)}}},H=async s=>{if(!n){r(!0),l(s);try{w(v,()=>{t({title:"Restore Completed",description:"Your data has been successfully restored"}),r(!1),l(null),v(0)},3e3)}catch{t({variant:"destructive",title:"Restore Failed",description:"There was an error restoring your data"}),r(!1),l(null),v(0)}}},ie=s=>{const d=m.find(B=>B.id===s);if(!d)return;const y=JSON.stringify({backup_id:s,date:d.date,type:d.type,data:"This is a simulated backup file content"}),C=new Blob([y],{type:"application/json"}),V=URL.createObjectURL(C),N=document.createElement("a");N.href=V,N.download=`backup_${s}_${new Date(d.date).toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),t({title:"Download Started",description:`Backup ${s} download initiated`})},ce=s=>{if(s.target.files&&s.target.files.length>0){const d=s.target.files[0];r(!0),w(v,()=>{const C={id:(parseInt(m[0].id)+1).toString(),date:new Date().toISOString(),size:`${(d.size/(1024*1024)).toFixed(1)} MB`,type:"Imported",status:"Completed"};x([C,...m]),t({title:"Backup Uploaded",description:`${d.name} has been uploaded and processed`}),r(!1),v(0)},2e3)}},S=(s,d)=>{b(y=>({...y,[s]:d})),t({title:"Settings Updated",description:`Backup setting "${s}" has been updated`})};return e.jsx(fe,{children:e.jsx(pe,{title:"Backup & Restore",children:e.jsxs(he,{defaultValue:"backup",children:[e.jsxs(je,{className:"grid grid-cols-3 mb-6 w-full sm:w-auto",children:[e.jsx(U,{value:"backup",children:"Backup"}),e.jsx(U,{value:"restore",children:"Restore"}),e.jsx(U,{value:"settings",children:"Settings"})]}),e.jsx(A,{value:"backup",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsxs(R,{children:[e.jsx(F,{children:"Create Backup"}),e.jsx(I,{children:"Create a new backup of your website data"})]}),e.jsxs(M,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This will create a complete backup of all your website data, including content, settings, and media files."}),a&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(E,{value:i}),e.jsxs("p",{className:"text-sm text-muted-foreground text-right",children:[Math.round(i),"%"]})]}),e.jsx(k,{onClick:ne,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Backup..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Create Backup"]})})]})]}),e.jsxs(P,{children:[e.jsxs(R,{children:[e.jsx(F,{children:"Backup History"}),e.jsx(I,{children:"List of previous backups"})]}),e.jsx(M,{children:e.jsx(X,{className:"h-80",children:e.jsxs(Y,{children:[e.jsx(G,{children:e.jsxs($,{children:[e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Size"}),e.jsx(f,{children:"Type"}),e.jsx(f,{children:"Status"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(J,{children:m.map(s=>e.jsxs($,{children:[e.jsx(g,{children:T(s.date)}),e.jsx(g,{children:s.size}),e.jsx(g,{children:s.type}),e.jsxs(g,{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"h-4 w-4 text-green-500"}),s.status]}),e.jsx(g,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>H(s.id),disabled:n,children:n&&p===s.id?e.jsx(z,{className:"h-4 w-4 animate-spin"}):e.jsx(W,{className:"h-4 w-4"})}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>ie(s.id),children:e.jsx(ve,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})]})}),e.jsx(A,{value:"restore",children:e.jsxs(P,{children:[e.jsxs(R,{children:[e.jsx(F,{children:"Restore from Backup"}),e.jsx(I,{children:"Restore your website from a backup file"})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Upload Backup File"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Upload a backup file to restore your website data."}),n&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsx(E,{value:h}),e.jsxs("p",{className:"text-sm text-muted-foreground text-right",children:[Math.round(h),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(xe,{id:"backup-file",type:"file",accept:".json,.zip",onChange:ce,className:"max-w-md",disabled:n}),e.jsxs(k,{disabled:n,children:[n?e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(be,{className:"mr-2 h-4 w-4"}),"Upload"]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Choose from Existing Backups"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select a previous backup to restore."}),e.jsx(X,{className:"h-64",children:e.jsxs(Y,{children:[e.jsx(G,{children:e.jsxs($,{children:[e.jsx(f,{children:"Date"}),e.jsx(f,{children:"Size"}),e.jsx(f,{children:"Type"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(J,{children:m.map(s=>e.jsxs($,{children:[e.jsx(g,{children:T(s.date)}),e.jsx(g,{children:s.size}),e.jsx(g,{children:s.type}),e.jsx(g,{className:"text-right",children:e.jsx(k,{variant:"default",size:"sm",onClick:()=>H(s.id),disabled:n,children:n&&p===s.id?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4 animate-spin"}),"Restoring..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Restore"]})})})]},s.id))})]})})]})]}),e.jsx(q,{className:"bg-muted/50 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Warning:"})," Restoring from a backup will overwrite your current website data. This action cannot be undone."]})})]})}),e.jsx(A,{value:"settings",children:e.jsxs(P,{children:[e.jsxs(R,{children:[e.jsx(F,{children:"Backup Settings"}),e.jsx(I,{children:"Configure your backup preferences"})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium",children:"Automatic Backups"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable regularly scheduled backups"})]}),e.jsx(D,{checked:j.autoBackup,onCheckedChange:s=>S("autoBackup",s)})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-base font-medium mb-2",children:"Backup Frequency"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"How often automatic backups should run"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[1,3,7].map(s=>e.jsx(k,{variant:j.backupFrequency===s?"default":"outline",onClick:()=>S("backupFrequency",s),children:s===1?"Daily":`Every ${s} days`},s))})]}),e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[e.jsx("h3",{className:"text-base font-medium",children:"Include in Backups"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Media Files"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Images, videos, and documents"})]}),e.jsx(D,{checked:j.includeMedia,onCheckedChange:s=>S("includeMedia",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Configuration Files"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Settings, preferences, and integrations"})]}),e.jsx(D,{checked:j.includeConfigs,onCheckedChange:s=>S("includeConfigs",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Analytics Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Statistics and visitor data"})]}),e.jsx(D,{checked:j.includeStatistics,onCheckedChange:s=>S("includeStatistics",s)})]})]})]}),e.jsxs(q,{className:"border-t flex justify-between",children:[e.jsx(k,{variant:"outline",onClick:()=>{b({autoBackup:!0,backupFrequency:7,includeMedia:!0,includeConfigs:!0,includeStatistics:!0}),t({title:"Settings Reset",description:"Backup settings have been reset to defaults"})},children:"Reset to Defaults"}),e.jsx(k,{onClick:()=>{t({title:"Settings Saved",description:"Your backup settings have been saved"})},children:"Save Settings"})]})]})})]})})})};export{ns as default};
