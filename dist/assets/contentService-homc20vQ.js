const i={title:"About Us - Default Title From Local Storage",content:"This is the default about content loaded from local storage. Please edit this in the admin panel.",imageUrl:"/placeholder.svg"},a={about:i},r=t=>new Promise(e=>setTimeout(e,t)),l=async t=>{await r(300);try{const e=localStorage.getItem("appContent");if(e){const o=JSON.parse(e);if(o[t])return console.log(`Loaded [${t}] from localStorage`),o[t]}if(a[t]){console.log(`Loaded [${t}] from initial_content.json`);const o=a[t];return t==="cv"&&(!o.data||!o.settings)?{data:{fileName:"Your_CV.pdf",lastUpdated:new Date().toISOString(),url:""},settings:{showDownloadButton:!0,showUpdateDate:!0,generateFromProfile:!1}}:o}if(t==="cv")return console.log(`Providing default structure for [${t}] as it was not in initial_content.json`),{data:{fileName:"Your_CV.pdf",lastUpdated:new Date().toISOString(),url:""},settings:{showDownloadButton:!0,showUpdateDate:!0,generateFromProfile:!1}};if(t==="about")return{title:"About Us - Default",content:"Default about content.",imageUrl:"/placeholder.svg"};throw new Error(`Content for section [${t}] not found and no default structure defined.`)}catch(e){return console.error(`Error getting content for ${t}:`,e),a[t]?a[t]:t==="cv"?{data:{fileName:"Your_CV.pdf",lastUpdated:new Date().toISOString(),url:""},settings:{showDownloadButton:!0,showUpdateDate:!0,generateFromProfile:!1}}:t==="about"?{title:"About Us - Default",content:"Default about content.",imageUrl:"/placeholder.svg"}:null}},s=async(t,e)=>{await r(500);try{const o=localStorage.getItem("appContent");let n=o?JSON.parse(o):{};return n[t]=e,localStorage.setItem("appContent",JSON.stringify(n)),console.log(`Saved [${t}] to localStorage`),!0}catch(o){return console.error(`Error saving content for ${t}:`,o),!1}},c=async()=>l("about"),g=async t=>s("about",t),f=async()=>{const t=await l("cv");return t&&t.data&&t.settings?t:{data:{fileName:"Your_CV.pdf",lastUpdated:new Date().toISOString(),url:""},settings:{showDownloadButton:!0,showUpdateDate:!0,generateFromProfile:!1}}},d=async t=>s("cv",t),p=async t=>{try{const e=await fetch(`http://localhost:4000/api/blog/${t}`);if(!e.ok)throw new Error("Failed to fetch blog post");return await e.json()}catch(e){return console.error("Error fetching blog post:",e),null}},u=async()=>{if(localStorage.getItem("appContent"))console.log("appContent found in localStorage.");else{console.log("No appContent in localStorage, initializing with defaults from initial_content.json");const e={};a.about&&(e.about=a.about),a.cv?e.cv=a.cv:e.cv={data:{fileName:"Your_CV.pdf",lastUpdated:new Date().toISOString(),url:""},settings:{showDownloadButton:!0,showUpdateDate:!0,generateFromProfile:!1}},a.portfolio&&(e.portfolio=a.portfolio),a.blogPosts&&(e.blogPosts=a.blogPosts),Object.keys(e).length>0?(localStorage.setItem("appContent",JSON.stringify(e)),console.log("Initialized localStorage with default content.")):console.log("initial_content.json is empty or missing expected sections, localStorage not initialized with defaults.")}};u();console.log("Content service initialized. Using localStorage for persistence.");export{c as a,f as b,d as c,p as g,g as u};
