import{r as c,b as M,I as O,j as e,t as S}from"./index-CEFGCZnp.js";import{A as U}from"./AdminLayout-BFo7kI8c.js";import{B as o}from"./button-C58ynU3B.js";import{I as W}from"./input-DqKHY6Ez.js";import{T as _,a as q,b as f,c as l,d as G,e as a}from"./table-Ctc4k8fS.js";import{C as d,a as m,c as J,d as K}from"./card-DsqFjwao.js";import{B as j}from"./badge-BQVUS7r0.js";import{S as y,a as P,b as T,c as D,d as r}from"./select-DAOFtx9-.js";import{S as Q}from"./search-B6zhR9QM.js";import{R as X}from"./refresh-cw-CvYjcQH8.js";import{P as Y}from"./plus-CZOBiviS.js";import{E as Z}from"./eye-BQ_UEY2C.js";import{P as ee}from"./pen-line-BH1qCV-l.js";import{T as se}from"./trash-2-PDkc7qqn.js";import"./dialog-CF5yEXG4.js";import"./index-CULbYOlY.js";import"./users-DLZwGyT7.js";import"./calendar-8sjuA-jc.js";import"./image-BSShWM4Y.js";import"./user-DmvOLSi9.js";import"./index-BdQq_4o_.js";import"./index-DdPWxvf5.js";import"./index-Cxzs49dU.js";import"./check-DnlIeJCj.js";const te=[{id:1,name:"Web Development",count:5},{id:2,name:"App Development",count:3},{id:3,name:"Design",count:4},{id:4,name:"Social Media",count:2},{id:5,name:"SEO",count:1}],Te=()=>{const[i,p]=c.useState([]),[n,g]=c.useState(""),[h,w]=c.useState(null),[x,N]=c.useState(null),[E,u]=c.useState(!1),b=M(),v=async()=>{u(!0);try{const s=await fetch("http://localhost:4000/api/blog");if(!s.ok)throw new Error("فشل جلب التدوينات");const t=await s.json();p(t)}catch{p([])}finally{u(!1)}};O.useEffect(()=>{v()},[]);const C=i.filter(s=>{const t=n===""||s.title.toLowerCase().includes(n.toLowerCase())||s.excerpt.toLowerCase().includes(n.toLowerCase()),H=!h||s.status===h,$=!x||s.category===x;return t&&H&&$}),L=()=>{b("/admin/blog/new")},k=s=>{b(`/admin/blog/edit/${s}`)},B=async s=>{u(!0);try{if(!(await fetch(`http://localhost:4000/api/blog/${s}`,{method:"DELETE"})).ok)throw new Error("فشل حذف التدوينة");S({title:"تم الحذف",description:"تم حذف التدوينة بنجاح."}),v()}catch(t){S({title:"خطأ",description:t.message,variant:"destructive"})}finally{u(!1)}},A=s=>{window.open(`/blog/${s}`,"_blank")},V=()=>{g(""),w(null),N(null)},R=i.filter(s=>s.status==="published").length,F=i.filter(s=>s.status==="draft").length,I=i.filter(s=>s.status==="scheduled").length,z=i.reduce((s,t)=>s+t.views,0);return e.jsxs(U,{title:"Blog Posts",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsx(Q,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(W,{placeholder:"Search posts...",className:"pl-8 w-full md:w-[300px]",value:n,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[e.jsxs(y,{value:h||"all",onValueChange:s=>w(s==="all"?null:s),children:[e.jsx(P,{className:"w-[150px]",children:e.jsx(T,{placeholder:"Status"})}),e.jsxs(D,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"published",children:"Published"}),e.jsx(r,{value:"draft",children:"Drafts"}),e.jsx(r,{value:"scheduled",children:"Scheduled"})]})]}),e.jsxs(y,{value:x||"all",onValueChange:s=>N(s==="all"?null:s),children:[e.jsx(P,{className:"w-[150px]",children:e.jsx(T,{placeholder:"Category"})}),e.jsxs(D,{children:[e.jsx(r,{value:"all",children:"All Categories"}),te.map(s=>e.jsx(r,{value:s.name,children:s.name},s.id))]})]}),(n||h||x)&&e.jsxs(o,{variant:"outline",onClick:V,children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Reset"]}),e.jsxs(o,{onClick:L,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"New Post"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(d,{children:e.jsxs(m,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:R})]}),e.jsx(j,{variant:"default",className:"text-sm px-2",children:"Live"})]})}),e.jsx(d,{children:e.jsxs(m,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Drafts"}),e.jsx("p",{className:"text-2xl font-bold",children:F})]}),e.jsx(j,{variant:"outline",className:"text-sm px-2",children:"Drafts"})]})}),e.jsx(d,{children:e.jsxs(m,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold",children:I})]}),e.jsx(j,{variant:"secondary",className:"text-sm px-2",children:"Upcoming"})]})}),e.jsx(d,{children:e.jsx(m,{className:"p-4 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Views"}),e.jsx("p",{className:"text-2xl font-bold",children:z})]})})})]}),e.jsxs(d,{children:[e.jsx(J,{children:e.jsx(K,{children:"Blog Posts"})}),e.jsx(m,{children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(f,{children:[e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Published"}),e.jsx(l,{children:"Views"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(G,{children:C.length===0?e.jsx(f,{children:e.jsx(a,{colSpan:6,className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No posts found"})})}):C.map(s=>e.jsxs(f,{children:[e.jsx(a,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[s.image&&e.jsx("img",{src:s.image,alt:s.title,className:"w-10 h-10 object-cover rounded mr-3"}),e.jsxs("div",{children:[s.title,e.jsx("p",{className:"text-xs text-muted-foreground max-w-xs truncate",children:s.excerpt})]})]})}),e.jsx(a,{children:e.jsx(j,{variant:s.status==="published"?"default":s.status==="draft"?"outline":"secondary",children:s.status})}),e.jsx(a,{children:s.category}),e.jsx(a,{children:s.publishDate?new Date(s.publishDate).toLocaleDateString():"—"}),e.jsx(a,{children:s.views}),e.jsxs(a,{className:"text-right space-x-1",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>A(s.id),children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>k(s.id),children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>B(s.id),disabled:E,children:e.jsx(se,{className:"h-4 w-4"})})]})]},s.id))})]})})]})]})};export{Te as default};
